export PATH="/opt/homebrew/bin:$HOME/.local/bin:$HOME/.bin:$HOME/.cargo/bin:$PATH"
export EDITOR="nvim"
export TERM=xterm-256color

# Aliases
alias g="git"
alias l="eza --icons"
alias ls="eza -l"
alias la="eza -la --icons"
alias c="code"
alias cm="chezmoi"
alias buu="brew update && brew upgrade"
alias muu="mise upgrade"
alias tailscale="/Applications/Tailscale.app/Contents/MacOS/Tailscale"

# History configuration
HISTFILE=~/.zsh_history
HISTSIZE=100000
SAVEHIST=100000

# Other options
unsetopt extended_glob
unsetopt nomatch
setopt auto_param_slash
setopt mark_dirs
setopt list_types

# Completion
setopt auto_menu # Show a menu with completions
setopt always_to_end # Always move cursor to end of completion
setopt complete_in_word # Complete in middle of a word
unsetopt flow_control # Disables the use of ⌃S to stop terminal output and the use of ⌃Q to resume it
unsetopt menu_complete # If set, this option prevents the completion menu from showing even if AUTO_MENU is set
zstyle ':completion:*:*:*:*:*' menu select
zstyle ':completion:*' matcher-list 'm:{a-zA-Z-_}={A-Za-z_-}' 'r:|=*' 'l:|=* r:|=*'
zstyle ':completion::complete:*' use-cache 1
zstyle ':completion::complete:*' cache-path $ZSH_CACHE_DIR
zstyle ':completion:*' list-colors ''
zstyle ':completion:*:*:kill:*:processes' list-colors '=(#b) #([0-9]#) ([0-9a-z-]#)*=01;34=0=01'

# completion
autoload -U compinit; compinit

# History substring search
bindkey '^[[A' history-substring-search-up
bindkey '^[[B' history-substring-search-down

# Dotenv
ZSH_DOTENV_ALLOWED_LIST=~/.config/dotenv-allowed
ZSH_DOTENV_DISALLOWED_LIST=~/.config/dotenv-disallowed

# Initialize Antidote
source ${ZDOTDIR:-~}/.antidote/antidote.zsh
antidote load

# Initialize FZF
[ -f ~/.fzf.zsh ] && source ~/.fzf.zsh

# Forgit
[ -f $HOMEBREW_PREFIX/share/forgit/forgit.plugin.zsh ] && source $HOMEBREW_PREFIX/share/forgit/forgit.plugin.zsh

# Initialize Zoxide
eval "$(zoxide init zsh)"

# Initialize mise
eval "$(mise activate zsh)"

# bun
[ -s "/Users/fred/.bun/_bun" ] && source "/Users/fred/.bun/_bun"
export BUN_INSTALL="$HOME/.bun"
export PATH="$BUN_INSTALL/bin:$PATH"

# atuin
eval "$(atuin init zsh)"

# starship
eval "$(starship init zsh)"
